<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="raphel-css.css">
    <script type="text/javascript" src="raphael-min.js" ></script>
    <script type="text/javascript" src="amitabh-data.js" ></script>
  </head>
  <body>
    
    
    
    
    
    <script type="text/javascript">
      
      var _name = amitabh[0].user.name
          , _createdAt =  amitabh[0].user.created_at
          , _lastTweet = amitabh[0].created_at  
          , _totalTweets =   amitabh.length
          , _totalFollowers = amitabh[0].user.followers_count 
          , _totalFavorites = amitabh[0].user.favourites_count
          , _totalFollowing = amitabh[0].user.friends_count 
          , _profileImage = amitabh[0].user.profile_image_url;  
      
      console.log("Name : " + _name);
      console.log("created At : " + _createdAt);
      console.log("Tweets : " + _totalTweets);
      console.log("Followers : " + _totalFollowers);
      console.log("Favourites : " + _totalFavorites);
      console.log("Following : " + _totalFollowing);
      console.log("Last Tweet : " + _lastTweet);
      
      console.dir(amitabh[6]);
      
      
      
      
    </script>
    
    
    
    <div class="wrapper">
      
      <div class="header">
        <span>Dashboard Alpha Version</span>
      </div>  
      
      
      <script type="text/javascript">
        
        
        
        
        
        var paper = Raphael(150, 100, 1300, 1500);
        //var rect = paper.rect(0,0, 820, 500);
        // Creates circle at x = 50, y = 40, with radius 10
        var circle = paper.circle(410, 245, 100).attr({'cursor':'pointer','fill':'#009933', 'stroke':'#fff', }).click(function () {show()});
        var hello =  paper.text(410,245,"Hello!").attr({'font-size':'20' , 'fill':'white', 'stroke':'black', 'stroke-width':'.5', 'title' :'say hello'});
        
        
        var   tweetCircle, tweetCircleText
            , followersCircle, followersCircleText
            , favouriteCircle, favouriteCircleText
            , followingCircle, followingCircleText;
        
        
        var c= 0, l=0, a=0, h=0, L=[], P=[], H={} ;
        for(var i=0; i<_totalTweets; i++)
        {
          if(amitabh[i].entities.user_mentions!="")
          {  
            c+=amitabh[i].entities.user_mentions.length; 
            
            for(var key in amitabh[i].entities.user_mentions)
            {
              P.push(amitabh[i].entities.user_mentions[key].name);
            }
            a++;
            
          }
          
          if(amitabh[i].entities.hashtags!="")
          {  
            
            for(var j=0; j<amitabh[i].entities.hashtags.length; j++)
            {
              //console.log(amitabh[i].entities.hashtags[j].text );
              
              if(H[amitabh[i].entities.hashtags[j].text])
                H[amitabh[i].entities.hashtags[j].text] +=1;
              else
                H[amitabh[i].entities.hashtags[j].text ]=1;  
              
            }  
            
            h++;
            
          }
          
          
          if(amitabh[i].entities.urls!="")
          {  
            L.push(amitabh[i].entities.urls[0].expanded_url);
            l++;
            
          }
          
          
          
        }
        
        
        var keysSorted = [];
        keysSorted = Object.keys(H).sort(function(b,a){return H[a]-H[b]})
          
          
          var show = function()
              {
                hello[0].textContent= _name;
                
                
                
                tweetCircle = paper.circle(100, 100, 80).attr({'cursor':'pointer', 'fill': '#CCFFCC', 'stroke': '#fff'}).click(function() {tweets()});
                
                tweetCircleText = paper.text(100,100,"TWEETS\n" +_totalTweets).attr({'font-size':'20','stroke':'#fff', 'font-weight':'bold'});
                
                followersCircle = paper.circle(720, 100, 80).attr({'cursor':'pointer', 'fill': '#CCFFCC', 'stroke': '#fff'});
                followersCircleText = paper.text(720,100,"FOLLOWERS\n" +_totalFollowers).attr({'font-size':'20','stroke':'#fff', 'font-weight':'bold'});
                
                favouriteCircle = paper.circle(100, 400, 80).attr({'cursor':'pointer', 'fill': '#CCFFCC', 'stroke': '#fff'});
                favouriteCircleText = paper.text(100,400,"Favourites\n" +_totalFavorites).attr({'font-size':'20','stroke':'#fff', 'font-weight':'bold'});
                
                followingCircle = paper.circle(720, 400, 80).attr({'cursor':'pointer', 'fill': '#CCFFCC', 'stroke': '#fff'});
                followingCircleText = paper.text(720,400,"Following\n" +_totalFollowing).attr({'font-size':'20','stroke':'#fff', 'font-weight':'bold'});
              }
              
              
              
              var tweets = function()
                  {
                    circle.remove();
                    hello.remove();
                    tweetCircle.remove();
                    tweetCircleText.remove();
                    
                    followingCircle.remove();
                    followingCircleText.remove();
                    
                    favouriteCircle.remove();
                    favouriteCircleText.remove();
                    
                    followersCircle.remove();
                    followersCircleText.remove();
                    
                    
                    tweetCircle = paper.circle(60, 60, 50).attr({'cursor':'pointer', 'fill': '#CCFFCC', 'stroke': '#fff'}).click(function() {tweets()});
                    tweetCircleText = paper.text(60,60,"Tweets\n" +_totalTweets).attr({'font-size':'15','stroke':'#fff', 'font-weight':'bold'});
                    
                    
                    followersCircle = paper.circle(60, 180, 50).attr({'cursor':'pointer', 'fill': '#CCFFCC', 'stroke': '#fff'});
                    followersCircleText = paper.text(60,180,"Follorwers\n" +_totalFollowers).attr({'font-size':'15','stroke':'#fff', 'font-weight':'bold'});
                    
                    favouriteCircle = paper.circle(60, 300, 50).attr({'cursor':'pointer', 'fill': '#CCFFCC', 'stroke': '#fff'});
                    favouriteCircleText = paper.text(60,300,"Favourites\n" +_totalFavorites).attr({'font-size':'15','stroke':'#fff', 'font-weight':'bold'});
                    
                    followingCircle = paper.circle(60, 420, 50).attr({'cursor':'pointer', 'fill': '#CCFFCC', 'stroke': '#fff'});
                    followingCircleText = paper.text(60,420,"Following\n" +_totalFollowing).attr({'font-size':'15','stroke':'#fff', 'font-weight':'bold'});
                    
                    
                    //paper.rect(150,50,600,400);
                    
                    
                    
                    paper.text(380,60, "Total number of Person Mentioned " + c + " in " + a + " Tweets out of "+_totalTweets).attr({'font-size':'15'});
                    paper.text(650,60, "show more").attr({'font-size':'15', 'fill':'blue', 'cursor':'pointer'}).click(function() {showMore(P)});
                    paper.text(380,100, "Total number of HashTag used " + h + " in " + _totalTweets + " Tweets.").attr({'font-size':'15'});
                    paper.text(650,100, "show more").attr({'font-size':'15', 'fill':'blue', 'cursor':'pointer'}).click(function() {showMore(H)});
                    paper.text(380,140, "Most common HashTag are " + keysSorted[0] + ", " + keysSorted[1] + ", " + keysSorted[2] ).attr({'font-size':'15'});
                    
                    paper.text(380,180, "Total links share " + l).attr({'font-size':'15'});
                    paper.text(650,180, "show more").attr({'font-size':'15', 'fill':'blue', 'cursor':'pointer'}).click(function() {showMore(L)});
                  }
                  
                  
                  var showMore =function(obj)
                      {
                        
                        
                        if(typeof obj==="object")
                        {
                          
                          var yincre = 0, xincre=0, incre=0 ; 
                          for(var z in obj)
                          {
                            if(incre!==15)
                            {  
                              paper.text(170 + xincre,300 + yincre, z + " : " +obj[z]).attr({'text-anchor': 'start', 'font-size':'13'});
                              yincre = yincre + 20 ;
                              incre ++;
                            }else
                            {
                              incre = 0;
                              yincre= 0;
                              xincre = xincre + 170;
                            }
                          }
                        }else
                        {
                          data = paper.text(170,300, obj).attr({'text-anchor': 'start', 'font-size':'13'});
                        }
                      }
                      
      </script>
      
      
      
    </div> <!-- end of wrapper tag -->
    
    
    
  </body>
</html>